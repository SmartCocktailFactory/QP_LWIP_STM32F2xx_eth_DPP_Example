/***********************************************************************/
/*                                                                     */
/*  FILE        :resetprg.c                                            */
/*  DATE        :Fri, Apr 13, 2007                                     */
/*  DESCRIPTION :initialize for C language.                            */
/*  CPU GROUP   :26A                                                   */
/*                                                                     */
/*  This file is generated by Renesas Project Generator (Ver.4.8).     */
/*                                                                     */
/***********************************************************************/

/*********************************************************************
 *  STARTUP for M16C/60,30,20,10
 *  Copyright(c) 2004 Renesas Technology Corp.
 *  And Renesas Solutions Corp.,All Rights Reserved.
 *  resetprg.c : startup file
 *
 *  Function:initialize each function
 *
 *
 * $Date: 2006/09/29 05:40:29 $
 * $Revision: 1.9 $
 *********************************************************************/
#include "sfr26a.h"
#include "typedefine.h"
#include "resetprg.h"


extern _UINT    _stack_top,_istack_top;
//DEF_BANKSELECT;
DEF_SBREGISTER;

#pragma entry start
void start(void);
extern void initsct(void);
extern void _init(void);
void exit(void);
void main(void);

#pragma section program interrupt

void start(void) {
    _isp_  = &_istack_top; // set interrupt stack pointer
    prcr   = 0x02;         // change protect mode register
    pm0    = 0x00;         // set processor mode register
    prcr   = 0x00;         // change protect mode register
    prcr   = 0x04;
    //pacr  = 0x04;         // 48pin
    pacr   = 0x01;         // 42pin
    prcr   = 0x00;
    ifsr2a = 0x01;         // for M16C/26A
    _flg_  = __F_value__;  // set flag register
#if __STACKSIZE__!=0
    _sp_   = &_stack_top;  // set user stack pointer
#endif
    _sb_   = 0x400;        // 400H fixation (Do not change)

    // set variable vector's address
    _asm("    ldc    #((topof vector)>>16)&0FFFFh,INTBH");
    _asm("    ldc    #(topof vector)&0FFFFh,INTBL");

    initsct();             // initlalize each sections

#if __HEAPSIZE__ != 0
    heap_init();           // initialize heap
#endif
#if __STANDARD_IO__ != 0
    _init();               // initialize standard I/O
#endif
    _fb_   = 0;            // initialize FB registe for debugger

    main();                // call main routine

    exit();                // call exit
}

void exit(void) {
    for (;;) {            // infinite loop
    }
}


